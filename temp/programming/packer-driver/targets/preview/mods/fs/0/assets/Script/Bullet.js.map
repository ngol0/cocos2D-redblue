{"version":3,"sources":["file:///Users/lamngo/Desktop/ATHENA/red-and-blue/assets/Script/Bullet.ts"],"names":["_decorator","Collider2D","Contact2DType","GameManager","PoolObjects","ccclass","property","Bullet","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","selfCollider","otherCollider","contact","tag","_isHit","update","deltaTime","MoveWithSpeed","_currentPos","y","_height","BackToPool","Instance","AddScore"],"mappings":";;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAA6CC,MAAAA,U,OAAAA,U;AAAYC,MAAAA,a,OAAAA,a;;AACzDC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;wBAIjBO,M,WADZF,OAAO,CAAC,QAAD,C,yBAAR,MACaE,MADb;AAAA;AAAA,sCACyC;AAAA;AAAA;;AAAA,2CACX,GADW;AAAA;;AAGrCC,QAAAA,KAAK,GAAI;AACL;AACA,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBT,UAAlB,CAAf;;AACA,cAAIQ,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYT,aAAa,CAACU,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACH;AACJ,SAToC,CAWrC;;;AACAA,QAAAA,cAAc,CAACC,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EACd;AACI,cAAID,aAAa,CAACE,GAAd,IAAqB,CAAzB,EAA4B;AAC5B;AACI;AACA,mBAAKC,MAAL,GAAc,IAAd;AACH;AACJ;;AAEDC,QAAAA,MAAM,CAAEC,SAAF,EAAqB;AAEvB,eAAKC,aAAL,CAAmBD,SAAnB,EAA8B,GAA9B;;AAEA,cAAI,KAAKE,WAAL,CAAiBC,CAAjB,GAAqB,KAAKC,OAA9B,EACA;AACI,iBAAKC,UAAL;AACH;;AACD,cAAI,KAAKP,MAAT,EACA;AACI;AAAA;AAAA,4CAAYQ,QAAZ,CAAqBC,QAArB,CAA8B,CAA9B;AACA,iBAAKF,UAAL;AACH;AAEJ;;AAnCoC,O","sourcesContent":["\nimport { _decorator, Component, Node, Vec3, NodePool, Collider2D, Contact2DType, IPhysics2DContact } from 'cc';\nimport { GameManager } from './GameManager';\nimport { PoolObjects } from './PoolObjects';\nconst { ccclass, property } = _decorator;\n\n \n@ccclass('Bullet')\nexport class Bullet extends PoolObjects  {\n    private _height: number = 760;\n\n    start () {\n        //collider\n        let collider = this.getComponent(Collider2D);\n        if (collider) {\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        }\n    }\n\n    //when bullet collides with enemies\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) \n    {\n        if (otherCollider.tag == 2) //tag2: red and stone enemies\n        {\n            //destroy bullet\n            this._isHit = true;\n        }\n    }\n\n    update (deltaTime: number) {\n\n        this.MoveWithSpeed(deltaTime, 400);\n\n        if (this._currentPos.y > this._height)\n        {\n            this.BackToPool();\n        }\n        if (this._isHit)\n        {\n            GameManager.Instance.AddScore(1);\n            this.BackToPool();\n        }\n       \n    }\n}\n\n"]}