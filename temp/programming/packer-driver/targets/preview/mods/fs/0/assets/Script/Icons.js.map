{"version":3,"sources":["file:///Users/lamngo/Desktop/ATHENA/red-and-blue/assets/Script/Icons.ts"],"names":["_decorator","Collider2D","Contact2DType","GameManager","Gun","PlayerController","PoolObjects","ccclass","property","Icons","start","collider","getComponent","on","BEGIN_CONTACT","onBeginContact","update","deltaTime","Moving","_isHit","Instance","AddScore","BackToPool","selfCollider","otherCollider","contact","tag","gunIsActive","SetCurTimer","Shoot","console","log","SetActiveShield","SetFasterSpeed"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAA6BC,MAAAA,U,OAAAA,U;AAA+BC,MAAAA,a,OAAAA,a;;AAC5DC,MAAAA,W,iBAAAA,W;;AACAC,MAAAA,G,iBAAAA,G;;AACAC,MAAAA,gB,iBAAAA,gB;;AACAC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;uBAIjBS,K,WADZF,OAAO,CAAC,OAAD,C,gBAAR,MACaE,KADb;AAAA;AAAA,sCACuC;AAEnCC,QAAAA,KAAK,GAAG;AACJ;AACA,cAAIC,QAAQ,GAAG,KAAKC,YAAL,CAAkBX,UAAlB,CAAf;;AACA,cAAIU,QAAJ,EAAc;AACVA,YAAAA,QAAQ,CAACE,EAAT,CAAYX,aAAa,CAACY,aAA1B,EAAyC,KAAKC,cAA9C,EAA8D,IAA9D;AACH;AACJ;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AAEtB,eAAKC,MAAL,CAAYD,SAAZ;;AAEA,cAAI,KAAKE,MAAT,EAAiB;AACb;AAAA;AAAA,4CAAYC,QAAZ,CAAqBC,QAArB,CAA8B,CAA9B;AACA,iBAAKC,UAAL;AACH;AAEJ;;AAEDP,QAAAA,cAAc,CAACQ,YAAD,EAA2BC,aAA3B,EAAsDC,OAAtD,EAAyF;AACnG;AACA;AACA;AACA;AAEA,cAAIF,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAlD,EAAqD;AAAE;AACnD,gBAAI;AAAA;AAAA,4BAAIN,QAAJ,CAAaO,WAAjB,EAA8B;AAC1B;AAAA;AAAA,8BAAIP,QAAJ,CAAaQ,WAAb,GAF6C,CAGjD;;AACA;AAAA;AAAA,4BAAIR,QAAJ,CAAaS,KAAb,GAJiD,CAI3B;;AAEtB,iBAAKV,MAAL,GAAc,IAAd;AACAW,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH,WARD,MAUK,IAAIR,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAlD,EAAqD;AAAE;AACxD;AAAA;AAAA,sDAAiBN,QAAjB,CAA0BY,eAA1B;AAEA,iBAAKb,MAAL,GAAc,IAAd;AACAW,YAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACH,WALI,MAOA,IAAIR,YAAY,CAACG,GAAb,IAAoB,CAApB,IAAyBF,aAAa,CAACE,GAAd,IAAqB,CAAlD,EAAqD;AAAE;AACxD;AAAA;AAAA,sDAAiBN,QAAjB,CAA0Ba,cAA1B;AAEA,iBAAKd,MAAL,GAAc,IAAd;AACAW,YAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACH,WALI,MAOA,IAAIP,aAAa,CAACE,GAAd,IAAqB,CAAzB,EAA4B;AACjC;AACI;AACA,mBAAKP,MAAL,GAAc,IAAd;AACH;AACJ;;AAxDkC,O","sourcesContent":["\nimport { _decorator, Component, Node, Collider2D, IPhysics2DContact, Contact2DType, Prefab, Script, CCClass } from 'cc';\nimport { GameManager } from './GameManager';\nimport { Gun } from './Gun';\nimport { PlayerController } from './PlayerController';\nimport { PoolObjects } from './PoolObjects';\nconst { ccclass, property } = _decorator;\n\n\n@ccclass('Icons')\nexport class Icons extends PoolObjects {\n\n    start() {\n        //collider\n        let collider = this.getComponent(Collider2D);\n        if (collider) {\n            collider.on(Contact2DType.BEGIN_CONTACT, this.onBeginContact, this);\n        }\n    }\n\n    update(deltaTime: number) {\n\n        this.Moving(deltaTime);\n\n        if (this._isHit) {\n            GameManager.Instance.AddScore(1);\n            this.BackToPool();\n        }\n\n    }\n\n    onBeginContact(selfCollider: Collider2D, otherCollider: Collider2D, contact: IPhysics2DContact | null) {\n        //tag1: gun icon\n        //tag3: bombicon\n        //tag7: shield icon\n        //tag8: speed icon\n\n        if (selfCollider.tag == 6 && otherCollider.tag == 5) { //gun\n            if (Gun.Instance.gunIsActive) //if icon is hit before, second icon will reset the timer\n                Gun.Instance.SetCurTimer();\n            //else\n            Gun.Instance.Shoot(); //shooting\n\n            this._isHit = true;\n            console.log('gun hit player');\n        }\n\n        else if (selfCollider.tag == 7 && otherCollider.tag == 5) { //shield\n            PlayerController.Instance.SetActiveShield();\n\n            this._isHit = true;\n            console.log('shield hit player');\n        }\n\n        else if (selfCollider.tag == 8 && otherCollider.tag == 5) { //speed\n            PlayerController.Instance.SetFasterSpeed();            \n\n            this._isHit = true;\n            console.log('speed hit player');\n        }\n\n        else if (otherCollider.tag == 4) //tag4: outofbound\n        {\n            //kill enemy\n            this._isHit = true;\n        }\n    }\n}\n"]}