{"version":3,"sources":["file:///Users/lamngo/Desktop/ATHENA/red-and-blue/assets/Script/Gun.ts"],"names":["_decorator","Component","PoolManager","ccclass","property","Gun","start","Instance","update","deltaTime","gunIsActive","_curBulletTime","curActiveTime","_timeBetweenBullets","CreateBullet","activeTime","Shoot","scheduleOnce","SetCurTimer"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;;AACZC,MAAAA,W,iBAAAA,W;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBJ,U;;qBAGjBK,G,WADZF,OAAO,CAAC,KAAD,C,8CAAR,MACaE,GADb,SACyBJ,SADzB,CACmC;AAAA;AAAA;;AAAA,iDAEG,CAFH;;AAAA;;AAAA,uDASO,CATP;;AAAA,kDAUE,CAVF;;AAAA,+CAYD,KAZC;AAAA;;AAc/BK,QAAAA,KAAK,GAAG;AACJD,UAAAA,GAAG,CAACE,QAAJ,GAAe,IAAf;AACH;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB;AACtB,cAAI,KAAKC,WAAT,EAAsB;AAClB,iBAAKC,cAAL,IAAuBF,SAAvB;AACA,iBAAKG,aAAL,IAAsBH,SAAtB;;AAEA,gBAAI,KAAKE,cAAL,GAAsB,KAAKE,mBAA/B,EAAoD;AACpD;AACI;AAAA;AAAA,gDAAYN,QAAZ,CAAqBO,YAArB;AACA,qBAAKH,cAAL,GAAsB,CAAtB;AACH;;AAED,gBAAI,KAAKC,aAAL,IAAsB,KAAKG,UAA/B,EAA6C;AAC7C;AACI,qBAAKL,WAAL,GAAmB,KAAnB;AACA,qBAAKE,aAAL,GAAqB,CAArB;AACH;AACJ;AACJ;;AAEDI,QAAAA,KAAK,GAAG;AAEJ,eAAKC,YAAL,CAAkB,YAAY;AAC1B;AACA;AAAA;AAAA,4CAAYV,QAAZ,CAAqBO,YAArB;AACH,WAHD,EAGG,GAHH;AAKA,eAAKJ,WAAL,GAAmB,IAAnB;AACH;;AAEDQ,QAAAA,WAAW,GAAG;AACV,eAAKR,WAAL,GAAmB,KAAnB;AACA,eAAKE,aAAL,GAAqB,CAArB;AACA,eAAKD,cAAL,GAAsB,CAAtB;AACH;;AAnD8B,O,uCAOD,I,sFAH7BP,Q;;;;;iBACoB,C","sourcesContent":["\nimport { _decorator, Component, Node, Pool } from 'cc';\nimport { PoolManager } from './PoolManager';\nconst { ccclass, property } = _decorator;\n\n@ccclass('Gun')\nexport class Gun extends Component {\n\n    protected curActiveTime: number = 0;\n\n    @property\n    activeTime: number = 5;\n\n    public static Instance: Gun = null;\n\n    private _timeBetweenBullets: number = 2;\n    private _curBulletTime: number = 0;\n\n    public gunIsActive: boolean = false;\n\n    start() {\n        Gun.Instance = this;\n    }\n\n    update(deltaTime: number) {\n        if (this.gunIsActive) {\n            this._curBulletTime += deltaTime;\n            this.curActiveTime += deltaTime;\n\n            if (this._curBulletTime > this._timeBetweenBullets) //shoot every 2 secs\n            {\n                PoolManager.Instance.CreateBullet();\n                this._curBulletTime = 0;\n            }\n\n            if (this.curActiveTime >= this.activeTime)   //stop shooting after 10 secs\n            {\n                this.gunIsActive = false;\n                this.curActiveTime = 0;\n            }\n        }\n    }\n\n    Shoot() {\n\n        this.scheduleOnce(function () {\n            // Here this refers to component\n            PoolManager.Instance.CreateBullet();\n        }, 0.2);\n\n        this.gunIsActive = true;\n    }\n\n    SetCurTimer() {\n        this.gunIsActive = false;\n        this.curActiveTime = 0;\n        this._curBulletTime = 0;\n    }\n}\n\n"]}